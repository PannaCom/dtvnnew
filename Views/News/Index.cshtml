@model PagedList.IPagedList<youknow.Models.title>
@using PagedList.Mvc; 

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/adminLayout.cshtml";
}
<h2>Danh sách tin tức</h2>
<p>
    @Html.ActionLink("Thêm mới", "Create")
</p>
@if (Model.PageCount>1){
    <div class="col-md-12">
    <ul class="pagination clearfix">
            Từ khóa: <input type="text" id="keyword" name="keyword" value="@ViewBag.keyword">&nbsp;Chọn trang: <select id="page" name="page" onchange="getPage();">
            @for (int i = 1; i <= Model.PageCount; i++)
            {
                if (i != ViewBag.page){
                   <text><option value="/News/Index?page=@i&keyword=@ViewBag.keyword">@i</option></text>
                }else{
                   <text><option value="/News/Index?page=@i&keyword=@ViewBag.keyword" selected>@i</option></text>
                }
            }
            </select>
            <input type="button" value="tìm kiếm" onclick="search();">
    </ul>
    </div>
}
<table width="100%">
    <tr>
        <th>
            Tên bài viết
        </th>
        <th>
            Tóm tắt
        </th>
        <th>
            Ảnh
        </th>
        <th>
            Ngày gửi
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td width="20%">
            <b>@Html.DisplayFor(modelItem => item.name)</b>
        </td>
        <td width="30%">
            @Html.DisplayFor(modelItem => item.des)
        </td>
        <td>
            <img src="@item.image" width="300" height="200">
        </td>
        <td width="10%">
            @item.datetime
        </td>
        <td>
            @Html.ActionLink("Sửa", "Edit", new { id=item.id }) |
            @Html.ActionLink("Xem", "Details", new { id = item.id }, new { target="_blank"}) |
            @Html.ActionLink("Xóa", "Delete", new { id=item.id })
        </td>
    </tr>
}

</table>
@if (Model.PageCount>1){
    <div class="col-md-12">
    <ul class="pagination clearfix">
            Từ khóa: <input type="text" id="keyword" name="keyword" value="@ViewBag.keyword">&nbsp;Chọn trang: <select id="page" name="page" onchange="getPage();">
            @for (int i = 1; i <= Model.PageCount; i++)
            {
                if (i != ViewBag.page){
                   <text><option value="/News/Index?page=@i&keyword=@ViewBag.keyword">@i</option></text>
                }else{
                   <text><option value="/News/Index?page=@i&keyword=@ViewBag.keyword" selected>@i</option></text>
                }
            }
            </select>
            <input type="button" value="tìm kiếm" onclick="search();">
    </ul>
    </div>
}
<script>
    function getPage() {
        window.location.href = document.getElementById("page").value;
    }
    function search() {
        window.location.href = "/News/Index?keyword=" + document.getElementById("keyword").value;
    }
</script>